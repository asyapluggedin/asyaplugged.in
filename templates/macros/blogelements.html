{# table of content #}
{% macro toc(page) %}
<aside id="toc" class="nav">
    <a aria-label="close button" href="#close" class="close" role="button">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" width="32" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z" fill="currentColor"></path></svg>
    </a>
    {% if config.extra.repo and config.extra.repo_branch %}
    <ul>
        <li class="edit-page">
                <a aria-label = "edit this page" href="{{ config.extra.repo }}/blob/{{ config.extra.repo_branch }}/content{{ current_path | replace(from="\\", to="/") | trim_end_matches(pat="/") }}.md">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" width="17" height="17" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path fill="currentColor" d="M2 26h28v2H2zM25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z"></path></svg>
                 Edit this page
            </a>
        </li>
    </ul>
    {% endif %}
    <span> Table of Contents: </span>
    <ul>
        {% for h1 in page.toc %}
        <li>
            <a aria-label="{{ h1.id }}" href="{{ h1.permalink | safe }}"> # {{ h1.title }} </a>
        </li>
            {% for h2 in h1.children %}
                <li class="children">
                    <a aria-label="{{ h2.id }}" href="{{ h2.permalink | safe }}"> ## {{ h2.title }} </a>
                </li>
                
            {% endfor %}
        {% endfor %}
    </ul>
</aside>
{% endmacro %}

{# sidebar #}
{% macro sidebar(current_url) %}
  {% if config.extra.current_section %}
        {% set index = get_section(path=current_section) %}
    {% else %}
        {% set index = get_section(path="_index.md") %}
    {% endif %}
    <nav id="sidebar" >
        <a aria-label="close button" href="#close" class = "close" role="button">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" width="32" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z" fill="currentColor"></path></svg>
    </a>
    <ul>
    {% if index.pages %}
    {% for page in index.pages %}
    <li class="{% if current_url == page.permalink %} active{% endif %}">
            <a class="{% if current_url == page.permalink %} active {%endif%}" href="{{ page.permalink | safe  }}">
                <span> {{page.title }} </span>
            </a>
        </li>
    {% endfor %}
    {% endif %}
        {% if index.subsections %}
        {% for s in index.subsections %}
        {% set subsection = get_section(path=s) %}
        <li class="subsection">
          <input id="toggle" type="checkbox" {% if current_path is starting_with(subsection.path) %}checked{% endif %}>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16L12 26l-1.4-1.4l8.6-8.6l-8.6-8.6L12 6z"></path></svg>
        <label for="toggle">
          {{ subsection.title }}
        </label>
        <ul class="subsection">
            {% if subsection.pages %}
            {% for page in subsection.pages %}
            <li class ="{% if current_url == page.permalink %} active {% endif %}">
                <a class="{% if current_url == page.permalink %} active {%endif%}"  href="{{ page.permalink | safe}}">
                    <span> {{page.title }} </span>
                </a>
            </li>
            {% endfor %}
            {% endif%}
            </ul>
        </li>
            {% endfor %}
    {% endif %}
    </ul>
</nav>
{% endmacro %}

{% macro relative_path() %}
{% if config.extra.relative_path or page.extra.relative_path %}
    {% for parent in page.ancestors %}
    {% set s = get_section(path=parent, include_pages=false) %}
    <li class="sections-no-padding">
        <a aria-label="{{ s.title }}" href="{{s.permalink}}">/{{s.title | lower }}</a>
    </li>
    {% endfor %}
    <li> <a aria-label="{{ page.slug }}" href="{{ page.permalink }}">/{{ page.slug }}</a></li>
    {% endif %}
{% endmacro %}

{% macro taxonomies_authors() %}
{% if page.extra.authors %}
    <li>
    <span> Authors:  </span>
    {% for author in page.extra.authors %}
      <li>
          {#         <!--  <a href="{{ get_taxonomy_url(kind="authors",name=author) | safe }}"> --> #}
        <span>{{ author }}</span>
        {#   <!-- </a> --> #}
      </li>
    {% endfor %}
    </li>
{% endif %}
{% endmacro %}


{% macro taxonomies_tags() %}
{% if page.extra.tags %}
    <li>
    <span> Tags:  </span>
    {% for tag in page.extra.tags %}
      <li>
        <a href="swag">
        <span>{{ tag }}</span>
        </a>
      </li>
    {% endfor %}
    </li>
{% endif %}
{% endmacro %}

{% macro taxonomies_bags() %}
{% if page.taxonomies.tags %}
    <li>
    <span> Tags:   </span>
    {% for tag in page.taxonomies.tags %}
      <li class="onetag">
        <a href="swag">
        <span>{{ tag }}</span>
        </a>
      </li>
    {% endfor %}
    </li>
{% endif %}
{% endmacro %}

{% macro taxonomies_bategory() %}
{% if page.taxonomies.category %}
    <li>
    <span class="margin-left-1rem">Category:  </span>
    {% for category in page.taxonomies.category %}
      <li>
        <a href="hmm">
        <span>{{ category }}</span>
        </a>
      </li>
    {% endfor %}
    </li>
{% endif %}
{% endmacro %}

{% macro taxonomies_category() %}
{% if page.extra.category %}
    <li>
    <span>Category: </span>
    {% for category in page.extra.category %}
      <li>
        <a href="hmm">
        <span>{{ category }}</span>
        </a>
      </li>
    {% endfor %}
    </li>
{% endif %}
{% endmacro %}

{% macro date() %}
{% if page.date %}
    <li><time> Published: {{ page.date | date(format="%B %e, %Y") }}</time></li>
{% endif %}
{% endmacro %}

{% macro updatedDate() %}
{% if page.date %}
    <li><time> Updated: {{ page.date | date(format="%F") }}</time></li>
{% endif %}
{% endmacro %}



{% macro updated() %}
{% if page.updated %}
  <li><time> Updated: {{ page.updated | date(format="%B %e, %Y") }}</time></li>
{% endif %}
{% endmacro %}

{% macro word_count() %}
{% if config.extra.show_word_count %}
    <li> <span> {{ page.word_count }} words </span></li>
{% endif %}
{% endmacro %}

{% macro reading_time() %}
{% if config.extra.show_reading_time %}
    <li> <span class="margin-left-1rem"> {% if page.reading_time > 1  %} {{ page.reading_time}} minutes {% elif page.reading_time == 0  %} less minute {% else %} {{ page.reading_time}} minute {% endif %} to read </span></li>
{% endif %}
{% endmacro %}

{# feature image #}

{% if post.extra.feature_image is matching("[.](jpg|jpeg|png|gif)$") %}
                {% set post_relative_path_array = post.relative_path | split(pat="/")  %}
                {%- if lang == config.default_language %}
                    {% set feature_image = post_relative_path_array[0] ~ "/" ~ post_relative_path_array[1] ~ "/" ~ post_relative_path_array[2] ~ "/" ~ post.extra.feature_image %}
                    {% set feature_image_300 = resize_image(path=feature_image, width=300, height=150, format="webp") %}
                    {% set feature_image_600 = resize_image(path=feature_image, width=600, height=300, format="webp") %}
                    {% set feature_image_900 = resize_image(path=feature_image, width=900, height=450, format="webp") %}
                    {% set feature_image_1200 = resize_image(path=feature_image, width=1200, height=600, format="webp") %}
                    {% set feature_image_1500 = resize_image(path=feature_image, width=1500, height=750, format="webp") %}
                    {% set feature_image_1800 = resize_image(path=feature_image, width=1800, height=900, format="webp") %}
                    {% set feature_image_2100 = resize_image(path=feature_image, width=2100, height=1050, format="webp") %}
                
                {% else %}
                    {% set feature_image = post.components[1] ~ "/" ~ post.year ~ "/" ~ post.date ~ "-" ~ post.title ~ "/" ~ post.extra.feature_image %}
                {% endif %}
                <img class="image" loading="lazy" alt="{{ post.title }}"
                srcset="{{ feature_image_300.url | safe }} 300w,
                        {{ feature_image_600.url | safe }} 600w,
                        {{ feature_image_900.url | safe }} 900w,
                        {{ feature_image_1200.url | safe }} 1200w,
                        {{ feature_image_1500.url | safe }} 1500w,
                        {{ feature_image_1800.url | safe }} 1800w,
                        {{ feature_image_2100.url | safe }} 2100w,"
                sizes="(max-width: 500px) 90vw,
                        (max-width: 700px) 200px,
                        (max-width: 900px) 300px,
                        (max-width: 1000px) 200px,
                        (max-width: 1200px) 300px,
                        400px">
            {% elif post.extra.feature_image is matching("[.](svg)$") %}
                <img class="image" loading="lazy" alt="{{ post.title }}" src="{{ post.permalink | safe }}{{ post.extra.feature_image }}">
            {% else %}
                <img class="image" loading="lazy" alt="{{ post.title }}"
                    srcset="https://source.unsplash.com/300x300/?{{ post.title | slugify }} 300w,
                            https://source.unsplash.com/600x600/?{{ post.title | slugify }} 600w,
                            https://source.unsplash.com/900x900/?{{ post.title | slugify }} 900w,
                            https://source.unsplash.com/1200x1200/?{{ post.title | slugify }} 1200w,
                            https://source.unsplash.com/1500x1500/?{{ post.title | slugify }} 1500w,
                            https://source.unsplash.com/1800x1800/?{{ post.title | slugify }} 1800w,
                            https://source.unsplash.com/2100x2100/?{{ post.title | slugify }} 2100w,"
                    sizes="(max-width: 500px) 90vw,
                        (max-width: 700px) 200px,
                        (max-width: 900px) 300px,
                        (max-width: 1000px) 200px,
                        (max-width: 1200px) 300px,
                        400px">
            {% endif %}

